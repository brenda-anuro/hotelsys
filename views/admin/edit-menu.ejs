<%- include('../partials/header')%>

    <%- include('../partials/nav')%>

   <main class="container" id="create-menu">
    <form action="/admin/edit/<%= menu.Id %>" method="post" enctype="multipart/form-data">
        <h1>Edit menu</h1>
        <label for="category"></label>
        <select name="category" id="" required>
            
            <option value="<%=menu.category%>"><%= menu.category%></option>
            <option>Select Category</option>
            <option value="starter">starter</option>
            <option value="main dish">main dish</option>
            <option value="dessert">dessert</option>

        </select>
        <label for="">name</label>
        <input type="text" name="name" id=""  value="<%= menu.name%>" required>
        <label for="">description</label>
        <input type="text" name="description" id="" value="<%= menu.description%>" required>
        <label for="">price</label>
        <input type="text" name="price" id="" value="<%= menu.price %>" required>

        <input type="hidden" name="picture" value="<%= menu.picture%>">
        <img src="/uploads/<%= menu.picture%>" alt="">
        <div id="change-pic">
            <label for="">would you like to change the picture</label>
            <input type="radio"checked name="changePic" value="no"> No
            <input type="radio" name="changePic" value="yes"> yes

        </div>
        <div id="new-picture">
            <label for="">picture</label>
        <input type="file" name="picture" id="" value="<%=  %>">
        </div>

            <div>
                <a href="/admin/menu">Cancel</a>
            <input type="submit" value="save">
        </div>
    </form>

   </main>
   <script>
    const radioBtns = document.querySelectorAll('input[name="changePic"]')
    let changePicDiv = document.querySelector('#change-pic')

    radioBtns.forEach(radioBtn =>{
        radioBtn.addEventListener('change', ()=>{
            if (radioBtn.value === 'yes') {
                changePicDiv.previousElementSibling.style.display = 'none'
                changePicDiv.nextElementSibling.style.display = 'block'
                changePicDiv.nextElementSibling.lastElementChild.setAttribute('required', '')

                
            } else {
                changePicDiv.previousElementSibling.style.display = 'block'
                changePicDiv.nextElementSibling.style.display = 'none'
                
            }

        })
    })
    
   </script>
    <%- include('../partials/footer')%>

